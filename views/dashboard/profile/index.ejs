<!doctype html>
<html class="no-js" lang="ar">
<%- include('../../partials/head.ejs') %>

    <body class="rtl">
        <div class="bmd-layout-container bmd-drawer-f-l avam-container animated bmd-drawer-in">
            <%- include('../../partials/header.ejs') %>
                <div id="dw-s1" class="bmd-layout-drawer bg-faded">
                    <%- include('../../partials/sidebar/index.ejs') %>
                </div>
                <main class="bmd-layout-content">
                    <div class="container-fluid">
                        <!-- Header -->
                        <div class="row m-1 pb-4 mb-3">
                            <div class="col-12 p-2">
                                <div
                                    class="page-header breadcrumb-header d-flex justify-content-between align-items-center">
                                    <div>
                                        <h3 class="lite-text"><i class="fas fa-user-circle"></i> الملف الشخصي</h3>
                                    </div>
                                    <div>
                                        <a href="/profile/settings" class="btn btn-primary"><i class="fas fa-cog"></i>
                                            تعديل البيانات</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Messages -->
                        <% if (typeof success !=='undefined' && success && success.length> 0) { %>
                            <div class="alert alert-success">
                                <%= success %>
                            </div>
                            <% } %>
                                <% if (typeof error !=='undefined' && error && error.length> 0) { %>
                                    <div class="alert alert-danger">
                                        <%= error %>
                                    </div>
                                    <% } %>

                                        <!-- Profile Card -->
                                        <div class="row m-1">
                                            <div class="col-lg-4 col-md-12 mb-3">
                                                <div class="card shade h-100">
                                                    <div class="card-body text-center">
                                                        <div class="mb-3">
                                                            <i class="fas fa-user-circle fa-5x text-secondary"></i>
                                                        </div>
                                                        <h4 class="card-title">
                                                            <%= user.name %>
                                                        </h4>
                                                        <h6 class="card-subtitle mb-2 text-muted">
                                                            <%= user.role %>
                                                        </h6>
                                                        <% if(user.schoolId) { %>
                                                            <p class="card-text text-info"><i class="fas fa-school"></i>
                                                                <%= user.schoolId.name ? user.schoolId.name : 'مدرسة' %>
                                                            </p>
                                                            <% } %>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-8 col-md-12 mb-3">
                                                <div class="card shade h-100">
                                                    <div class="card-header bg-white">
                                                        <h5><i class="fas fa-info-circle"></i> المعلومات الأساسية</h5>
                                                    </div>
                                                    <div class="card-body">
                                                        <ul class="list-group list-group-flush">
                                                            <li
                                                                class="list-group-item d-flex justify-content-between align-items-center">
                                                                <span><i class="fas fa-envelope text-secondary"></i>
                                                                    البريد الإلكتروني</span>
                                                                <span class="font-weight-bold">
                                                                    <%= user.email %>
                                                                </span>
                                                            </li>
                                                            <li
                                                                class="list-group-item d-flex justify-content-between align-items-center">
                                                                <span><i class="fas fa-phone text-secondary"></i> رقم
                                                                    الهاتف</span>
                                                                <span class="font-weight-bold">
                                                                    <%= user.phone || 'غير محدد' %>
                                                                </span>
                                                            </li>
                                                            <!-- Role specific info could go here -->
                                                            <li
                                                                class="list-group-item d-flex justify-content-between align-items-center">
                                                                <span><i class="fas fa-calendar-alt text-secondary"></i>
                                                                    تاريخ التسجيل</span>
                                                                <span class="font-weight-bold">
                                                                    <%= user.createdAt ? new
                                                                        Date(user.createdAt).toLocaleDateString('ar-EG')
                                                                        : '-' %>
                                                                </span>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                    </div>
                </main>
        </div>
        <%- include('../../partials/scripts.ejs') %>
    </body>

</html>